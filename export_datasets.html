<!---Yong Mei Chen fin ai Website-->

<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <style>
            html{
                color:white;
            }
            body {
                background-image: url(/fullbackimage2.JPG);
                    background-repeat:no-repeat;
                   background-size:cover;
            } 
            h1, div{
                text-align: center; 
            }
            .button {
                background-color: #555555;
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
                }
            
            </style>

        <title>Export datasets</title> 
         <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase.js"></script>    
        <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>  
        <script src="http://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        
    </head>

    <body>
        <h1>Export new datasets</h1> 

        <div> 
            <button class="button" name="scriptbutton" id="script" value="run script"  onclick = "location.href = 'home.html' ">Home</button>
            <button class="button" name="Run house report" type="submit" onclick = "location.href = 'house_report.html'; ">House report</button> 
            <button class="button" name="loan report" type="loan report"  onclick = "location.href = 'loan_report.html'; ">Loan report</button>
            <button class="button" name="export datasets" type="submit"  onclick = "location.href = 'export_datasets.html'; ">Export datasets</button>
            <button class="button" name="view clients" id="script" value="view clients"  onclick = "location.href = 'viewclients.html'; ">View Clients</button>
            <button class="button" name="Log Out" type="submit" value="Log Out" onclick = "mainApp.logOut()">Log Out</button>
            <br><br><br><br> <!--export database as a whole-->
            <button onclick = "goPython()" > Export datasets</button> 

            <script>
                function goPython(){ 
                
                    var json = json3.items
                    var fields = Object.keys(json[0])
                    var replacer = function(key, value) { return value === null ? '' : value } 
                    var csv = json.map(function(row){
                    return fields.map(function(fieldName){
                        return JSON.stringify(row[fieldName], replacer)
                    }).join(',')
                    })
                    csv.unshift(fields.join(',')) // add header column
                    csv = csv.join('\r\n');
                    console.log(csv)
                    
                }
            </script> 
        </div>

        <script src ="fireBase.js"></script> 
        <script src ="main.js"></script>   
    </body>
</html>