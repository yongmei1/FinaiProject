<html>
    <head>
        <meta charset="UTF-8">
        <style>
            html{
                color: white;
            }
            body {
                background-image: url(/fullbackimage2.JPG);
                    background-repeat:no-repeat;
                   background-size:cover;
            } 
            div{
                float : right;
            }
            h1{
                text-align: center;
            }
            .button {
                background-color: #555555;
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
                }
            
            </style>

        <title>Loan status report Page</title> 
        <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase.js"></script> 
        <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>   
        <script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script> 

    </head>

    <body>
        <h1>Report for loan status</h1> 
        
        <div>    
            <button class="button" name="Log Out" type="submit" value="Log Out" onclick = "mainApp.logOut()">Log Out</button>
        </div><br><br> 

                Client ID number <input id = "userinput"></input>
                <button onclick= "getValue()"> Get client</button>
        
        <p id = "demo"></p> 
        <h4 id = "loan"></h4> 
        <h4 id = "third"></h4> 
        <h4 id = "fourth"></h4> 
        <h4 id = "fifth"></h4> 
        <h4 id = "sixth"></h4> 
        <h4 id = "seventh"></h4> 
        <h4 id = "eighth"></h4> 
        <h4 id = "ninth"></h4> 
        <h4 id = "tenth"></h4>  
        <h4 id = "twelfth"></h4> 
        
        <!---client bank email -->
        <h4 id = "bank"></h4>
        <h4 id = "email"></h4>  
        
  

        <script> 

            function getValue(){  
                const array = [];
                var x, text;
                x = document.getElementById("userinput").value;

                if (x != null){
                    text = 'client '+ x + ' details on the way';

                    var loan = document.getElementById('loan');
                    var dbRef = firebase.database().ref().child('Loan/'+x+'/ApplicantIncome');
                    dbRef.on('value',snap => loan.innerText = 'Clients applicant loan is: '+snap.exportVal());
                    var x = snap.exportVal();
                    array.push(x);

                    var third = document.getElementById('third');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Credit_History');
                    dbRef.on('value',snap => third.innerText = 'Clients credit history is: '+snap.val());
                   // array.push(snap.val());

                    var fourth = document.getElementById('fourth');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Education');
                    dbRef.on('value',snap => fourth.innerText = 'Client education status is: '+snap.val());
                  //  array.push(snap.val());

                    var fifth = document.getElementById('fifth');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Gender');
                    dbRef.on('value',snap => fifth.innerText = 'Clients gender is: '+snap.val());
                  //  array.push(snap.val());

                    var sixth = document.getElementById('sixth');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Married');
                    dbRef.on('value',snap => sixth.innerText = 'Client marriage status: '+snap.val());
                  //  array.push(snap.val());

                    var seventh = document.getElementById('seventh');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Property_Area');
                    dbRef.on('value',snap => seventh.innerText = 'Clients property area: '+snap.val());
                  //  array.push(snap.val());

                    var eighth = document.getElementById('eighth');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Self_Employed');
                    dbRef.on('value',snap => eighth.innerText = 'Clients employment status: '+snap.val());
                  //  array.push(snap.val());

                    var ninth = document.getElementById('ninth');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Loan_Amount_Term');
                    dbRef.on('value',snap => ninth.innerText = 'Clients loan amount term: '+snap.val());
                  //  array.push(snap.val());

                    var tenth = document.getElementById('tenth');
                    var dbRef = firebase.database().ref().child('FinancialHistory/'+ x +'/LoanAmount');
                    dbRef.on('value',snap => tenth.innerText = 'Clients loan amount: '+snap.val());
                  //  array.push(snap.val());

                    var twelfth = document.getElementById('twelfth');
                    var dbRef = firebase.database().ref().child('Loan/'+ x +'/Dependents');
                    dbRef.on('value',snap => twelfth.innerText = 'Clients dependants: '+ snap.val());
                  //  array.push(snap.val());
                    }

            document.getElementById("demo").innerHTML = text;
           /* for(var i = 0; i < array. length ; i++){
            console. log(array[i])  
            }*/
        }
     
        var firebaseConfig = {
            apiKey: "AIzaSyACPL6AK5ais6oLbrRi7VIb3VLW1lSeCNU",
            authDomain: "finaisystem.firebaseapp.com",
            databaseURL: "https://finaisystem.firebaseio.com",
            projectId: "finaisystem",
            storageBucket: "finaisystem.appspot.com",
            messagingSenderId: "248168444493",
            appId: "1:248168444493:web:ed04ddf7469898c0a82204",
            measurementId: "G-5DTT5JN9DR"
        };
    
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
 
        var dbRef = firebase.database().ref('Client');  
       /*
        var id = document.getElementById('bank');
        var bank = document.getElementById('email');
        dbRef.on("value", function(snapshot){
            snapshot.forEach(function(childSnapshot){
                var childData = childSnapshot.val();
                var bank =childData.bankName;
                var email=childData.email;   
                //console.log(childData);
                console.log(bank, email); 
            });
            var bank = document.getElementById('bank');
            var email = document.getElementById('email');
        });*/
 
        </script> 
 

        <script src ="fireBase.js"></script>
        <script src ="main.js"></script>   
        <script src ="loan.js"></script>  
    </body>
</html>